<div class="container mt-5">
    <h1>新しい記事を作成する</h1>
       <% if @blog.errors.any? %>
        <div id="error_explanation" class="alert alert-danger">
            <ul>
                <% @blog.errors.full_messages.each do |message| %>
                <li><%= message %></li><% end %>
            </ul>
        </div>
        <% end %>


   <%= form_for(@blog) do |f| %>
    <div class="container">
        <div class="row">
             <p>形式</p>
             <%= f.select :tag,  [["要約文", "要約文"],["意見文", "意見文"]], class:"select" %>

        </div>
        <div class="row">
           	 <p>見出しタイトル</p>
             <%= f.text_field :header %>
        </div>
        <div class="row">
            <div class="col-xs-4">
                 <p>著者</p>
                 <%= f.text_field :author %>
            </div>
            <div class="col-xs-4">
                 <p>出典</p>
                 <%= f.text_field :source %>
            </div>
            <div class="col-xs-4">
                 <p>問題集</p>
                 <%= f.text_field :book %>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6">
                <p>一般論</p>
                 <%= f.text_field :claim1 %>
            </div>
            <div class="col-xs-6">
                 <p>筆者の主張</p>
                 <%= f.text_field :claim2 %>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6">
                <p>根拠</p>
                 <%= f.text_field :basis1 %>
            </div>
            <div class="col-xs-6">
                 <p>根拠</p>
                 <%= f.text_field :basis2 %>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6">
                <p>具体例</p>
                 <%= f.text_field :example1 %>
            </div>
            <div class="col-xs-6">
                 <p>具体例</p>
                 <%= f.text_field :example2 %>
            </div>
        </div>
        <div class="row">
             <select id="select">
                    <option selected disabled>文字数選択</option>
                    <option>50</option>
                    <option>100</option>
                    <option>200</option>
                    <option>400</option>
                </select>

        </div>
        <div class="row">
            <p>本文</p>
            <textarea id="cou" cols="50" rows="10" name="blog[body]"><%= @body %></textarea>
            <p id="nowlength"> </p>
            <p id="inputlength"></p>
        </div>
    </div>
     <div class="btn inline">
     	<%= f.submit '投稿する',class:"btn btn-primary btn-block" %>
     </div>
   <% end %>
</div>


<script type="text/javascript">
    $(function(){
        $("#nowlength").text("今"+$("#cou").val().length+"文字");

        //現在の文字数計測
        $("#cou").keyup(function() {
            $("#nowlength").text("今"+$("#cou").val().length+"文字");
        })

        //文字数選択済み
        $("#select").change(function() {
            var val = $(this).val(); //100 or 200
            var cou = $("#cou").val().length; //textareaの文字数
            var res = val-cou; //残り文字数
            $("#inputlength").text("残り"+res+"文字");

            //キーアップ
            $("#cou").keyup(function() {
                var val = $("#select").val();
                var cou = $("#cou").val().length;
                res = val-cou;
                $("#inputlength").text("残り"+res+"文字");

            });
        });
    });


</script>

